<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="end">
      <ion-button (click)="resetFilter()">
        <ion-icon slot="start" name="refresh"></ion-icon>{{transService.getTranslatedData('Reset')}}
      </ion-button>
      <ion-button (click)="closeModal(false)">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{transService.getTranslatedData('Ticket Filter')}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="max-available-height full-width ">
    <div class="">
      <ion-row class="">
        <ion-list class="full-width">

          <ion-grid fixed>
            <ion-list-header class="font-17">{{transService.getTranslatedData('Ticket Status')}}
            </ion-list-header>
            <ion-row>

              <ion-col class="padding-left-10">

                <ion-chip [ngClass]="ticketFilter.status.indexOf('open') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketStatus('open')">
                  <ion-label class="font-16 font-weight-500">{{transService.getTranslatedData('Open')}}
                  </ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.status.indexOf('in-progress') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketStatus('in-progress')">
                  <ion-label class="font-16 font-weight-500">
                    {{transService.getTranslatedData('In Progress')}}</ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.status.indexOf('resolved') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketStatus('resolved')">
                  <ion-label class="font-16 font-weight-500">
                    {{transService.getTranslatedData('Resolved')}}</ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.status.indexOf('re-open') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketStatus('re-open')">
                  <ion-label class="font-16 font-weight-500">
                    {{transService.getTranslatedData('Re Open')}}</ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.status.indexOf('on-hold') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketStatus('on-hold')">
                  <ion-label class="font-16 font-weight-500">
                    {{transService.getTranslatedData('On Hold')}}</ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.status.indexOf('rejected') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketStatus('rejected')">
                  <ion-label class="font-16 font-weight-500">
                    {{transService.getTranslatedData('Rejected')}}</ion-label>
                </ion-chip>

                <!-- <ion-chip [ngClass]="ticketFilter.status == 'all' ? 'all' : 'b'" outline="true" color="primary"
                  (click)="selectTicketStatus('all')">
                  <ion-label class="font-16 font-weight-500">All</ion-label>
                </ion-chip> -->

              </ion-col>
            </ion-row>

          </ion-grid>

          <ion-grid class="margin-top-10" fixed>
            <ion-list-header class="font-17">{{transService.getTranslatedData('Raised For')}}
            </ion-list-header>
            <ion-row>

              <ion-col class="padding-left-10">
                <ion-chip [ngClass]="ticketFilter.ticketBelongsTo.indexOf('Home') != -1 ? 'selected' : 'a'"
                  outline="true" color="primary" (click)="selectTicketBelongsTo('Home')">
                  <ion-label class="font-16 font-weight-500">{{transService.getTranslatedData('Unit')}}
                  </ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.ticketBelongsTo.indexOf('Project') != -1 ? 'selected' : 'a'"
                  outline="true" color="primary" (click)="selectTicketBelongsTo('Project')">
                  <ion-label class="font-16 font-weight-500">
                    {{transService.getTranslatedData('Common Area')}}</ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.ticketBelongsTo.indexOf('Facility') != -1 ? 'selected' : 'a'"
                  outline="true" color="primary" (click)="selectTicketBelongsTo('Facility')">
                  <ion-label class="font-16 font-weight-500">
                    {{transService.getTranslatedData('Facility')}}</ion-label>
                </ion-chip>
              </ion-col>
            </ion-row>

          </ion-grid>

          <!-- <ion-grid class="margin-top-10" fixed>
            <ion-list-header class="font-17">{{transService.getTranslatedData('Ticket Type')}}
            </ion-list-header>
            <ion-row>
              <ion-col class="padding-left-10">

                <ion-chip [ngClass]="ticketFilter.type.indexOf('on-demand') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketType(['on-demand'])">
                  <ion-label class="font-16 font-weight-500">
                    {{transService.getTranslatedData('On demand')}}</ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.type.indexOf('ppm') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketType(['ppm'])">
                  <ion-label class="font-16 font-weight-500">{{transService.getTranslatedData('Ppm')}}
                  </ion-label>
                </ion-chip>

              </ion-col>
            </ion-row>
          </ion-grid> -->

          <ion-grid class="margin-top-10" fixed>
            <ion-list-header class="font-17">{{transService.getTranslatedData('Priority')}}
            </ion-list-header>
            <ion-row>
              <ion-col class="padding-left-10">

                <ion-chip [ngClass]="ticketFilter.priority.indexOf('low') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketPriority('low')">
                  <ion-label class="font-16 font-weight-500">{{transService.getTranslatedData('Low')}}
                  </ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.priority.indexOf('medium') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketPriority('medium')">
                  <ion-label class="font-16 font-weight-500">{{transService.getTranslatedData('Medium')}}
                  </ion-label>
                </ion-chip>

                <ion-chip [ngClass]="ticketFilter.priority.indexOf('high') != -1 ? 'selected' : 'a'" outline="true"
                  color="primary" (click)="selectTicketPriority('high')">
                  <ion-label class="font-16 font-weight-500">{{transService.getTranslatedData('High')}}
                  </ion-label>
                </ion-chip>

              </ion-col>
            </ion-row>
          </ion-grid>


          <ion-list>
            <ion-list-header class="gotham font-16 font-weight-500">
              {{transService.getTranslatedData('Category')}}</ion-list-header>
            <ion-item (click)="openModal('ticketCategory')" class="ion-padding-start-0">
              <ion-label class="gotham margin-left-16" [ngClass]="{'txt-slate-grey': !ticketFilter.ticketCategoryName}">
                {{ticketFilter.ticketCategoryName ? ticketFilter.ticketCategoryName : transService.getTranslatedData('Click here to select a category')}}
              </ion-label>
              <ion-icon class="float-right" name="arrow-dropdown"></ion-icon>
            </ion-item>
          </ion-list>

          <ion-list n-list *ngIf="subCategories.length>0">
            <ion-list-header class="gotham font-16 font-weight-500">
              {{transService.getTranslatedData('Sub Category')}}</ion-list-header>
            <ion-item (click)="openModal('ticketSubCategory')" class="ion-padding-start-0" >
              <ion-label class="gotham margin-left-16" [ngClass]="{'txt-slate-grey': !ticketFilter.ticketSubCategoryName}">
                {{ticketFilter.ticketSubCategoryName ? ticketFilter.ticketSubCategoryName : transService.getTranslatedData('Click here to select a sub category')}}
              </ion-label>
              <ion-icon class="float-right" name="arrow-dropdown"></ion-icon>
            </ion-item>
          </ion-list>

          <ion-list>
            <ion-list-header class="gotham font-16 font-weight-500">
              {{transService.getTranslatedData('Created By')}}</ion-list-header>
            <ion-item (click)="openModal('createdBy')" class="ion-padding-start-0">
              <ion-label class="gotham margin-left-16" [ngClass]="{'txt-slate-grey': !createdBySearchValue}">
                {{createdBySearchValue ? createdBySearchValue : transService.getTranslatedData('Click here to select created by')}}
              </ion-label>
              <ion-icon slot="end" *ngIf="!ticketFilter.createdBy" name="arrow-dropdown"></ion-icon>
              <ion-icon slot="end" *ngIf="ticketFilter.createdBy" (click)="removeData($event,'createdBy')" name="close">
              </ion-icon>
            </ion-item>
          </ion-list>

          <ion-list>
            <ion-list-header class="gotham font-16 font-weight-500">{{transService.getTranslatedData('PROJECT')}}
            </ion-list-header>
            <ion-item (click)="openModal('Project')" class="ion-padding-start-0">
              <ion-label class="gotham margin-left-16" [ngClass]="{'txt-slate-grey': !ticketFilter.projectName}">
                {{ticketFilter.projectName ? ticketFilter.projectName : transService.getTranslatedData('Click here to select a project')}}
              </ion-label>
              <ion-icon slot="end" *ngIf="!ticketFilter.projectId" name="arrow-dropdown"></ion-icon>
              <ion-icon slot="end" *ngIf="ticketFilter.projectId" (click)="removeData($event,'Project')" name="close">
              </ion-icon>
            </ion-item>

            <div *ngIf="ticketFilter.ticketBelongsTo.indexOf('Home')>=0&&ticketFilter.projectId">
              <ion-list-header class="gotham font-16 font-weight-500">{{transService.getTranslatedData(organizationType ==='residential' ? 'UNIT' : 'CONTRACT')}}
              </ion-list-header>
              <ion-item (click)="openModal(organizationType ==='residential' ? 'Home' : 'Contract')" class="ion-padding-start-0">
                <ion-label class="gotham margin-left-16" [ngClass]="{'txt-slate-grey': !ticketFilter.unitName}">
                  {{ticketFilter.unitName ? ticketFilter.unitName : transService.getTranslatedData(organizationType ==='residential' ? 'Click here to select a unit' : 'Click here to select a contract')}}
                </ion-label>
                <ion-icon slot="end" *ngIf="!ticketFilter.unitId" name="arrow-dropdown"></ion-icon>
                <ion-icon slot="end" *ngIf="ticketFilter.unitId" (click)="removeData($event,'Home')" name="close">
                </ion-icon>
              </ion-item>
            </div>
          </ion-list>

          <ion-list>
            <ion-list-header class="gotham font-16 font-weight-500">
              {{transService.getTranslatedData('POINT OF CONTACT')}}
            </ion-list-header>
            <ion-item (click)="openModal('poc')" class="ion-padding-start-0">
              <ion-label class="gotham margin-left-16" [ngClass]="{'txt-slate-grey': !contactPointSearchValue}">
                {{contactPointSearchValue ? contactPointSearchValue : transService.getTranslatedData('Click here to select poc')}}
              </ion-label>
              <ion-icon slot="end" *ngIf="!ticketFilter.contactPoint" name="arrow-dropdown"></ion-icon>
              <ion-icon slot="end" *ngIf="ticketFilter.contactPoint" (click)="removeData($event,'POC')" name="close">
              </ion-icon>
            </ion-item>
          </ion-list>

          <ion-list>
            <ion-list-header class="gotham font-16 font-weight-500">
              {{transService.getTranslatedData('TECHNICIAN')}}</ion-list-header>
            <ion-item (click)="openModal('agent')" class="ion-padding-start-0">
              <ion-label class="gotham margin-left-16" [ngClass]="{'txt-slate-grey': !ticketFilter.agentName}">
                {{ticketFilter.agentName ? ticketFilter.agentName : transService.getTranslatedData('Click here to select a technician')}}
              </ion-label>
              <ion-icon slot="end" *ngIf="!ticketFilter.agent" name="arrow-dropdown"></ion-icon>
              <ion-icon slot="end" *ngIf="ticketFilter.agent" (click)="removeData($event,'Technician')" name="close">
              </ion-icon>
            </ion-item>
          </ion-list>




          <ion-list>
            <ion-list-header class="gotham font-16 font-weight-500">
              {{transService.getTranslatedData('ASSETS')}}</ion-list-header>
            <ion-item (click)="openScanner()" class="ion-padding-start-0">
              <ion-label class="gotham margin-left-16" [ngClass]="{'txt-slate-grey': !ticketFilter.assetId}">
                {{ticketFilter.assetId ? ticketFilter.assetId : transService.getTranslatedData('Click here to scan an asset')}}
              </ion-label>
              <ion-icon slot="end" *ngIf="!ticketFilter.asset" name="arrow-dropdown"></ion-icon>
              <ion-icon slot="end" *ngIf="ticketFilter.asset" (click)="removeData($event,'Asset')" name="close">
              </ion-icon>
            </ion-item>
          </ion-list>


          <!-- <ion-item class="margin-bottom-10">
            <ion-list-header class="font-16 gotham font-weight-500">
              {{transService.getTranslatedData('ASSETS')}}</ion-list-header>
            <ion-input inputmode="text" [(ngModel)]="ticketFilter.assetId" class="margin-top-10 gotham"
              placeholder="{{transService.getTranslatedData('ASSETS')}}" readonly="true" (click)="openScanner()">
            </ion-input>
            <ion-icon slot="end" name="ios-arrow-down"></ion-icon>
          </ion-item> -->

          <ion-list>
            <ion-list-header class="gotham font-16 font-weight-500">
              {{transService.getTranslatedData('STARTING JOB DATE')}}
            </ion-list-header>
            <ion-item>

              <ion-datetime displayFormat="DD-MMMM-YYYY" placeholder="{{transService.getTranslatedData('DD-MMM-YYYY')}}"
                picker-format="DD-MMMM-YYYY" class=" padding-0" [(ngModel)]="ticketFilter.startDate"
                [doneText]="transService.getTranslatedData('Done')"
                [cancelText]="transService.getTranslatedData('Cancel')">
              </ion-datetime>
              <ion-icon slot="end" name="arrow-dropdown" class="margin-top-0"></ion-icon>
            </ion-item>
          </ion-list>

          <ion-list>
            <ion-list-header class="gotham font-16 font-weight-500">{{transService.getTranslatedData('END JOB DATE')}}
            </ion-list-header>
            <ion-item>

              <ion-datetime displayFormat="DD-MMMM-YYYY" placeholder="{{transService.getTranslatedData('DD-MMM-YYYY')}}"
                picker-format="DD-MMMM-YYYY" class=" padding-0" [(ngModel)]="ticketFilter.endDate"
                [doneText]="transService.getTranslatedData('Done')"
                [cancelText]="transService.getTranslatedData('Cancel')">
              </ion-datetime>
              <ion-icon slot="end" name="arrow-dropdown" class="margin-top-0"></ion-icon>
            </ion-item>
          </ion-list>
        </ion-list>
      </ion-row>
    </div>
  </div>


</ion-content>
<ion-button size="large" (click)="closeModal(true)" color="danger">
  {{transService.getTranslatedData('Apply')}}</ion-button>